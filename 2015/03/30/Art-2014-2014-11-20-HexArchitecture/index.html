<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hex Architecture | Anti</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="六边形架构第一次看到六边形架构,是从《IDDD》这本书里看到的,当时就觉得这是和DDD相当match的架构.稍微研究了下,发现Alistair Cockburn这篇《Hexagonal Architecture》详细地介绍什么是六边形架构,按照惯例, A生假假地的翻译了一下.  六边形架构作者 : Alistair Cockburn译者 : A生   创建一个既不需要UI也不需要DB就能工作的应用">
<meta property="og:type" content="article">
<meta property="og:title" content="Hex Architecture">
<meta property="og:url" content="http://yoursite.com/2015/03/30/Art-2014-2014-11-20-HexArchitecture/index.html">
<meta property="og:site_name" content="Anti">
<meta property="og:description" content="六边形架构第一次看到六边形架构,是从《IDDD》这本书里看到的,当时就觉得这是和DDD相当match的架构.稍微研究了下,发现Alistair Cockburn这篇《Hexagonal Architecture》详细地介绍什么是六边形架构,按照惯例, A生假假地的翻译了一下.  六边形架构作者 : Alistair Cockburn译者 : A生   创建一个既不需要UI也不需要DB就能工作的应用">
<meta property="og:image" content="http://yoursite.com/img/2014/0721-HexagonalArchitecture.jpg">
<meta property="og:image" content="http://yoursite.com/img/2014/Hexagonal-1.jpg">
<meta property="og:image" content="http://yoursite.com/img/2014/Hexagonal-2.gif">
<meta property="og:image" content="http://yoursite.com/img/2014/Hexagonal-3.gif">
<meta property="og:image" content="http://yoursite.com/img/2014/Hexagonal-4.gif">
<meta property="og:image" content="http://yoursite.com/img/2014/Hexagonal-5.gif">
<meta property="og:updated_time" content="2015-03-30T14:34:38.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hex Architecture">
<meta name="twitter:description" content="六边形架构第一次看到六边形架构,是从《IDDD》这本书里看到的,当时就觉得这是和DDD相当match的架构.稍微研究了下,发现Alistair Cockburn这篇《Hexagonal Architecture》详细地介绍什么是六边形架构,按照惯例, A生假假地的翻译了一下.  六边形架构作者 : Alistair Cockburn译者 : A生   创建一个既不需要UI也不需要DB就能工作的应用">
<meta name="twitter:image" content="http://yoursite.com/img/2014/0721-HexagonalArchitecture.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Anti" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Anti</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="mobile-Art-2014-2014-11-20-HexArchitecture" class="article article-type-mobile" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/03/30/Art-2014-2014-11-20-HexArchitecture/" class="article-date">
  <time datetime="2015-03-30T14:34:38.000Z" itemprop="datePublished">2015-03-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Art/">Art</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Hex Architecture
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="六边形架构"><a href="#六边形架构" class="headerlink" title="六边形架构"></a>六边形架构</h1><p><img src="/img/2014/0721-HexagonalArchitecture.jpg" alt="img"><br>第一次看到六边形架构,是从《IDDD》这本书里看到的,当时就觉得这是和DDD相当match的架构.<br>稍微研究了下,发现Alistair Cockburn这篇<a href="http://alistair.cockburn.us/Hexagonal+architecture" target="_blank" rel="noopener">《Hexagonal Architecture》</a><br>详细地介绍什么是六边形架构,按照惯例, A生假假地的翻译了一下.</p>
<hr>
<h1 id="六边形架构-1"><a href="#六边形架构-1" class="headerlink" title="六边形架构"></a>六边形架构</h1><p>作者 : Alistair Cockburn<br>译者 : A生  </p>
<pre><code>创建一个既不需要UI也不需要DB就能工作的应用程序,那样你就能针对它去运行自动化的回归测试,即使DB挂了也能继续工作,不需要任何用户参与,就能和其他应用程序连接起来.
</code></pre><p><img src="/img/2014/Hexagonal-1.jpg" alt="img"></p>
<h1 id="模式-端口与设配器-“对象结构”"><a href="#模式-端口与设配器-“对象结构”" class="headerlink" title="模式: 端口与设配器 (“对象结构”)"></a>模式: 端口与设配器 (“对象结构”)</h1><hr>
<p><em>别名 : 端口与设配器</em><br><em>别名 : 六边形架构</em>  </p>
<h2 id="意图"><a href="#意图" class="headerlink" title="意图"></a>意图</h2><p>允许一个应用程序平等地被用户,程序,自动化测试和批处理脚本所驱动,可被单独开发和测试于最终运行时的设备和数据库.  </p>
<p>从外面世界进来的事件到达某一个端口,一个技术意义上的设配器把它转换成一个过程调用或消息后传入应用程序.应用程序幸福地忽略输入设备的本来面目.当应用程序发送某些东西出去时,它通过某个端口发送至某个设配器,去创建被接收技术方(人工或自动)所需要的适当的信号.应用程序从语义上通过适配器和各处交互,而不需要去知道设配器另一端的本来面目.</p>
<p><img src="/img/2014/Hexagonal-2.gif" alt="img"></p>
<h1 id="特性-1"><a href="#特性-1" class="headerlink" title="特性 1"></a>特性 1</h1><h2 id="动机"><a href="#动机" class="headerlink" title="动机"></a>动机</h2><p>这些年来软件应用程序里最大的问题之一,就是把业务逻辑渗透在用户接口的代码里.<br>由此引起的问题有三部分:   </p>
<ul>
<li>第一,系统不能被自动化测试套件整洁地测试,因为部分需要被测试的逻辑依赖经常变化的可视化细节,如字段长度和按钮位置等;</li>
<li>因为同样的原因,它变得不可能从一个人肉使用的系统变成一个批处理的系统;</li>
<li>还是同样的原因,当系统开始受欢迎的时候,它变得困难或不可能去允许该程序被另外的程序所驱动.  </li>
</ul>
<p>在许多组织里重复的,一种尝试了的解决方案,就是创建一个分层的架构.<br>在那个时候去承诺,真心诚意地去承诺,没有业务逻辑会放到新的分层里.<br>但是,当发生了破坏承诺的时候,却没有一种机制能够检测出.<br>组织会发现若干年后,新的分层和业务逻辑混在一起,老问题又再次出现了.  </p>
<p>现在想象应用程序提供的“每一片”功能，是以API（application programmed interface) 或函数调用的形式出现。<br>在这种情况下，当任何新的代码破坏现有可工作的功能的时候，测试或QA部门可通过运行自动化测试脚本来针对应用程序去发现问题。<br>业务专家可以在GUI细节最终确定之前，创建自动化测试用例，去告诉程序员，什么才是他们的工作正确完成的时候。（那些测试由测试部门来运行）。<br>应用程序可用“headless”模式去部署，所以只有API是有效的，其他的程序可利用它的功能——简化了整个复杂系统套件的设计，同时也许可了每一个Web上无需人介入的“business-to-business”的应用服务。<br>最后，自动化了功能上的回归测试，检测出了任何违背了把业务逻辑放在表现层之外的承诺。组织可以检测和修正逻辑泄露。  </p>
<p>另外一个类似的有趣问题，什么是被认为是正常的应用程序的“另一边”，那里是应用程序逻辑被绑定在外部的数据库或设备？当数据库服务器停机或进行重大的修订或替换时，程序员就不能继续工作，因为他们的工作绑定在数据库上。这会导致延迟成本和人们会经常感觉到很糟糕。</p>
<p>以上2个问题看起来不是很明显的相关，但它们在自然的解决方案中却显现出了对称性。</p>
<h2 id="自然的解决方案"><a href="#自然的解决方案" class="headerlink" title="自然的解决方案"></a>自然的解决方案</h2><p>客户端和服务器端两边的问题都是因为设计和编程上的同一个错误——业务逻辑和与外部实体交互之间的纠缠不清。<br>不对称的探索，不是在应用程序的“左边”和“右边“之间，而是应该在应用程序的”内部“和”外部“之间。这样的规则履行了与”内部“相关的代码不应该泄露到”外部“去。  </p>
<p>暂时移除任何左右或上下的不对称，我们看到了应用程序通过“端口”与外部代理们沟通。<br>“端口”一词应会引起联想到操作系统层面的端口，任何设备都可以插入使用某种协议的端口那里。同样道理，“端口”在电子产品那，任何设备只要符合规格，都可以插入电子产品里。  </p>
<pre><code>端口的协议就是为了两个设备之间的会话。  
</code></pre><p>这样的协议以API的形式出现。  </p>
<p>每一个外部设备都有一个“设配器”，把API所定义的信号转换到设备所需要的，反之亦然。<br>一个图形化的用户接口或GUI就是一个设配器的例子，映射了一个人在API端口上的动作。<br>其他的设配器在同一个端口上则是自动化测试的安全带，例如FIT或Fitnesse，批处理驱动器，和任何为了应用程序和整体或网络之间沟通的代码。  </p>
<p>在应用程序的另一边，应用程序通过与外部实体沟通来获得数据。<br>数据库协议就是一种经典的协议。<br>从应用程序的角度，如果数据库从一个SQL数据库迁移到一个扁平的文件或其他类型的数据库，通过API的转换应该没有改变。<br>在同一个端口上增加的设配器应该包括一个SQL设配器，一个文件设配器。<br>最重要的，一个去连接到“mock”数据库，一个停留在内存里和完全不依赖真正数据库的设配器。  </p>
<p>许多应用程序只有2个端口：客户端的对话和数据库端的对话。<br>这让他们以不对称的形式出现，从而让看起来像是创建一个一维的，3/4/5层的架构的应用程序。  </p>
<p>这样的图纸会有2个问题。<br>第一、并且是最坏的情况，人们通常不会认真地对待分层中的“边界线”。他们会让应用程序的逻辑泄露在层级边界之外，导致以上所说的问题。<br>第二、应用程序可能会有超过2个以上的端口，所以架构上并不对应一维的层设计。  </p>
<p>六边形(或端口与设配器)架构通过在这种情况下注意到对称性来解决了这些问题：<br>一个应用程序在内部，通过某些端口与外界的东西交互。应用程序外面的东西能够尽早地去处理对称性。  </p>
<p>六边形有意在视觉上突出  </p>
<p>(a) 内外的对称性和相似自然的端口,摆脱了一维层视图和所有的调用,和<br>(b) 不同端口定义的存在数量——2,3 或4个 (4个是我最常遇到的)</p>
<p>六边形不是六边的是因为数字6很重要,而是允许人们进行绘制是有空间去放入他们所需要的端口和设配器,不限制于一维层次的绘制。术语“六边形架构”是来自可视化的效果。  </p>
<p>术语“端口与设配器”拾起了部分绘制的“目的”。端口定义了有目的的会话。通常会有多个设配器对应一个端口，为了多样的技术可插入端口内。 有代表性的，它们可以包括一个电话机器应答，一个人工应答，一个按键式电话，一个图形化人机界面，一个测试装置，一个批处理驱动器，一个http接口，一个程序到程序的接口，一个mock（内存内）数据库，一个真正的数据库（可能有不同的数据库用于开发。测试和实际使用）。  </p>
<p>在应用程序里，左右不对称将再次带出来，无论如何，这个模式的主要目的是集中于内外不对称，从应用程序的角度，假装短暂地识别所有的外面组件。</p>
<h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><p><img src="/img/2014/Hexagonal-3.gif" alt="img"></p>
<h1 id="特性-2"><a href="#特性-2" class="headerlink" title="特性 2"></a>特性 2</h1><p>特性2显示了一个应用程序有着2个活动端口和用于同一个端口多个设配器。那2个端口分别是应用程序控制方面和数据检索方面。这样的绘制显示出应用程序可以被平等地驱动于：一个自动化、系统级别的回归测试套件，一个人类用户，一个远程的http应用程序，或者另一个应用程序。在数据方面，应用程序从外部数据库解耦，可以被配置运行在一个内存内的Oracle，或“mock”，数据库替换者；或者它可以运行在针对测试的或运行时的数据库。应用程序功能上的规格，或许在用例内，是针对与六边形内部的接口，而不是针对任何一个外部的技术可能用到的接口。   </p>
<p><img src="/img/2014/Hexagonal-4.gif" alt="img"></p>
<h1 id="特性-3"><a href="#特性-3" class="headerlink" title="特性 3"></a>特性 3</h1><p>特性3显示出同一个应用程序对应一个三层架构绘制。每一个端口简化到只有2个适配器。这样的绘制趋势于去显示，多个适配器怎样去适应于顶层和低层，和在开发系统中被用到的，多个适配器之间的序列。编号的箭头显示出一个团队和应用程序可能会用到的次序：</p>
<ol>
<li>用于被应用程序驱动的一个FIT测试设备和用着取代真正数据库的mock（内存内）数据库；  </li>
<li>增加一个GUI到应用程序，仍然跑在mock数据库。  </li>
<li>在集成测试里，针对于一个真正包含测试数据的数据库，运行自动化测试脚本（如从Cruise Control）去驱动应用程序。  </li>
<li>真正地去使用，一个人通过应用程序去访问真正的数据库。  </li>
</ol>
<h2 id="样例代码"><a href="#样例代码" class="headerlink" title="样例代码"></a>样例代码</h2><p>幸运地可以通过FIT的文档，一个最简化应用程序去演示端口与适配器。它是一个简单的折扣计算的应用程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">discount(amount) = amount * rate(amount);</span><br></pre></td></tr></table></figure>
<p>在我们的程序里，amount会来自用户和rate会来自一个数据库，所以那里会有2个端口。<br>我们实现它们在以下步骤：</p>
<ul>
<li>测试取代mock数据库的一个固定的rate</li>
<li>然后是GUI</li>
<li>然后是一个可被切换到真正数据库的mock数据库</li>
</ul>
<p><em>感谢在IHC的Gyan Sharma 提供这个例子的代码。</em></p>
<h3 id="步骤1：-FIT-App-constant-as-mock-database"><a href="#步骤1：-FIT-App-constant-as-mock-database" class="headerlink" title="步骤1： FIT App constant-as-mock-database"></a>步骤1： FIT App constant-as-mock-database</h3><p>首先我们创建测试用例通过一个HTML table(看FIT文档如下):</p>
<table><br><tbody><tr><br><td> TestDiscounter </td><td> </td><br></tr><br><tr><br><td> amount  </td><td> discount() </td><br></tr><br><tr><br><td> 100  </td><td> 5 </td><br></tr><br><tr><br><td> 200  </td><td>10 </td><br></tr><br></tbody></table>

<p>注意列名会变成class和function名字在我们的应用程序里。<br>FIT包括了摆脱这种“programmerese”的道路，但是为了这篇文章会简单地把它们放进来。  </p>
<p>知道了那些会是测试的数据，我们创建用户边的设配器，来自FIT里的ColumnFixture如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fit.ColumnFixture; </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDiscounter</span> <span class="keyword">extends</span> <span class="title">ColumnFixture</span> </span></span><br><span class="line"><span class="class"></span>&#123; </span><br><span class="line">   <span class="keyword">private</span> Discounter app = <span class="keyword">new</span> Discounter(); </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">double</span> amount;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">discount</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">   </span>&#123; <span class="keyword">return</span> app.discount(amount); &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实际上那里的所有都是到设配器的，目前为止，测试可从命令行里运行（看FIT的书会有你所需要的路径）。我们使用这个：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set FIT_HOME=<span class="regexp">/FIT/</span>FitLibraryForFit15Feb2005</span><br><span class="line">java -cp %FIT_HOME%<span class="regexp">/lib/</span>javaFit1<span class="number">.1</span>b.jar;%FIT_HOME%<span class="regexp">/dist/</span>fitLibraryForFit.jar;src;bin</span><br><span class="line">fit.FileRunner test/Discounter.html TestDiscount_</span><br></pre></td></tr></table></figure>
<p>FIT 生产出一个导出的文件，通过颜色告诉我们那些测试通过了（或者失败，唯一我们在过程中从那里打错了）   </p>
<p>在这个点上的代码已经准备好去check in，集成在Cruise Control或你自己的自动化构建机器里，包括在构建-测试套件里。</p>
<h3 id="步骤2：-UI-App-constant-as-mock-database"><a href="#步骤2：-UI-App-constant-as-mock-database" class="headerlink" title="步骤2： UI App constant-as-mock-database"></a>步骤2： UI App constant-as-mock-database</h3><p>我会让你去创建属于你自己的UI和让它驱动Discounter应用程序，因为代码放在这里有点过长，某些关键的代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">   ...</span><br><span class="line"> Discounter app = <span class="keyword">new</span> Discounter();</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent event)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">   String amountStr = text1.getText();</span><br><span class="line">   <span class="keyword">double</span> amount = Double.parseDouble(amountStr);</span><br><span class="line">   discount = app.discount(amount));</span><br><span class="line">   text3.setText( <span class="string">""</span> + discount );</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure>
<p>在这个点上的代码可以去被演示和回归测试。用户端的设配器都已运行中。</p>
<h3 id="步骤3：-FIT-or-UI-App-mock-database"><a href="#步骤3：-FIT-or-UI-App-mock-database" class="headerlink" title="步骤3：  (FIT or UI) App mock database"></a>步骤3：  (FIT or UI) App mock database</h3><p>去创建一个可替换的数据库端的设配器，我们为一个仓储创建一个“接口”，一个“RepositoryFactory” 会生产出要么模拟数据库、要么真正的服务的对象，在内存里去模拟数据库。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">RateRepository</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">double</span> <span class="title">getRate</span><span class="params">(<span class="keyword">double</span> amount)</span></span>;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RepositoryFactory</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">RepositoryFactory</span><span class="params">()</span> </span>&#123;  <span class="keyword">super</span>(); &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> RateRepository <span class="title">getMockRateRepository</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> MockRateRepository();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MockRateRepository</span> <span class="keyword">implements</span> <span class="title">RateRepository</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getRate</span><span class="params">(<span class="keyword">double</span> amount)</span> </span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(amount &lt;= <span class="number">100</span>) <span class="keyword">return</span> <span class="number">0.01</span>;</span><br><span class="line">      <span class="keyword">if</span>(amount &lt;= <span class="number">1000</span>) <span class="keyword">return</span> <span class="number">0.02</span>;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0.05</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>挂钩这个设配器到Discounter应用程序内，我们需要更改下应用程序自身，去接受使用一个repository设配器，和让（FIT / UI）用户端的设配器传入repository去使用（real or mock）到应用程序的构造函数里。<br>这里有已更改的应用程序和一个FIT设配器传入一个模拟的repository。<br>（FIT设配器的代码，选择是否传入到模拟或真实repository的设配器里，在没有增加太多新的信息情况下有点过长，所以我在这里省略的那个版本）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> repository.RepositoryFactory;</span><br><span class="line"><span class="keyword">import</span> repository.RateRepository;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Discounter</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> RateRepository rateRepository;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Discounter</span><span class="params">(RateRepository r)</span> </span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">super</span>();</span><br><span class="line">      rateRepository = r;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">discount</span><span class="params">(<span class="keyword">double</span> amount)</span> </span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">double</span> rate = rateRepository.getRate( amount ); </span><br><span class="line">      <span class="keyword">return</span> amount * rate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">import</span> app.Discounter;</span><br><span class="line"><span class="keyword">import</span> fit.ColumnFixture;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDiscounter</span> <span class="keyword">extends</span> <span class="title">ColumnFixture</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> Discounter app = </span><br><span class="line">       <span class="keyword">new</span> Discounter(RepositoryFactory.getMockRateRepository());</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">double</span> amount;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">discount</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> app.discount( amount );</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>那样就包括了实现六边形架构的最简单的版本。</p>
<p>另外一个不同的实现，使用Ruby和Rack为了浏览器使用，详情：<br><a href="https://github.com/totheralistair/SmallerWebHexagon" target="_blank" rel="noopener">https://github.com/totheralistair/SmallerWebHexagon</a></p>
<h2 id="应用程序指南"><a href="#应用程序指南" class="headerlink" title="应用程序指南"></a>应用程序指南</h2><h3 id="左右不对称"><a href="#左右不对称" class="headerlink" title="左右不对称"></a>左右不对称</h3><p>端口和设配器模式是故意把所有的端口都写上去像是从根本上是相似的。那样的假装在架构层面是有用的。<br>在实现阶段，端口和设配器显示出2种风味，我将其称之为“主要的”和“次要的”，理由很快会揭晓。它们可称之为“驱动”设配器和“被驱动”设配器。  </p>
<p>警觉的读者会注意到所有已给的例子里，FIT fixtures是用了左边端口而mock在右边。<br>在三层的架构里，FIT 坐落在顶层而mock坐落在底层。  </p>
<p>相关的主意是来自“主角”和“次角”的例子。“主角”是驱动了应用程序（改变静止的状态和执行某个已知的功能）。“次角”是被应用程序所驱动的，无论是从中获取应答还是仅仅是通知。“主角”和“次角”的差别是在于谁触发了或者是负责了会话。  </p>
<p>FIT是代替主角的自然测试设配器，从框架设计成读取一个脚本和驱动应用程序开始。<br>mock是代替了“次角”的自然测试设配器，从被设计成从应用程序里去应答查询和记录事件开始。  </p>
<p>这些观察带领我们服从系统的用例上下文图，和在六边形的左边（或顶层）去绘制“主要端口”和“主要适配器”，在六边形的右边（或底层）去绘制“次要端口”和“次要适配器”。  </p>
<p>主次要端口和设配器之间的关系，和他们在FIT和mock的各自实现，记在脑子里是有用的，但应该是用来作为使用端口和设配器架构的结论，而不是简化之。<br>实现端口和设配器的最终好处从一个完全隔离模式敏捷地去运行应用程序。  </p>
<h3 id="用例和应用程序边界"><a href="#用例和应用程序边界" class="headerlink" title="用例和应用程序边界"></a>用例和应用程序边界</h3><p>使用六边形架构模式是有用地去加强，编写用例的首选模式。  </p>
<p>编写用例通常会犯的错误是，在每个端口外面包含了亲密的技术知识。<br>在行业里这种用例获得了众所周知的坏名声，变得冗长，难读，沉闷，易碎，维护昂贵。  </p>
<p>理解端口和设配器模式，我们可以看到用例一般应该写在应用程序边界内（六边形内部），<br>去指定被应用程序所支持的功能和事件，不去管外部的技术。<br>这样用例是简短，易读，更少维护成本，和在时间上更加稳定。</p>
<h3 id="多少端口？"><a href="#多少端口？" class="headerlink" title="多少端口？"></a>多少端口？</h3><p>到底什么是或不是端口，很大程度上只是口味的问题。<br>在极端的情况下，每一个用例只有自己的端口，为了许多的应用程序提供了上百个端口。<br>另外的一种选择，可以想象把所有的主要端口和次要端口融合在一起，到那时3只有2个端口，左边的和右边的。  </p>
<p>没有最好只有更好。   </p>
<p>已知应用的天气预报系统有着4个自然的端口：天气反馈，管理员，通知用户，用户数据库。<br>咖啡售卖机的有4个自然的端口：用户，包括食谱和价格的数据库，售卖机，和硬币箱子。<br>医院的药物系统可能有3个：一个给护士，一个给药方数据库，一个给控制药物分配器。  </p>
<p>选择“错误”数量的端口数不见得会有任何特殊的坏处，所以保持一种直觉即可。<br>我倾向于选择少量的数目，2,3或4，如上所述和已知应用。</p>
<h3 id="已知应用"><a href="#已知应用" class="headerlink" title="已知应用"></a>已知应用</h3><p><img src="/img/2014/Hexagonal-5.gif" alt="img"></p>
<h1 id="特性-4"><a href="#特性-4" class="headerlink" title="特性 4"></a>特性 4</h1><p>特性展现一个有着4个端口并且每个端口都有多个设配器的应用程序。<br>这是从一个应用程序衍生出的监听来自国家天气服务的警报，关于地震，龙卷风，火灾<br>和水灾。和通知人们通过他们的电话或电话对讲机。<br>在我们讨论这个系统的时候，这个系统的接口已确认，从“技术，连接的目的”上讨论过。那里有一个接口为了接收电线上的触发数据，一个为了把通知数据发送到对答的机器上，一个GUI实现的管理接口，和一个获取用户数据的数据库接口。  </p>
<p>人们正在努力，因为他们需要从天气服务增加一个http接口，一个email接口给他们的用户，和他们不得不寻找一种方式可以为了不同的客户采购偏好，绑定和解绑他们增长着的应用程序套件。他们害怕停留在一个维护和测试的噩梦里，因为他们不得不实现，测试和维护所有独立的组合和排列的版本。  </p>
<p>他们修改了设计，在系统接口上根据“目的”而不是根据“技术”去架构，让技术通过设配器变得可以替换（所有方面的）。<br>他们立马提高了速度去包含http订阅和email通知（新的设配器通过虚线绘制出来）。<br>通过APIs让每个应用程序在headless模式下运行，他们可以增加一个 app-to-add 的设配器和解除绑定应用程序套件，按需连接子应用程序。<br>最后，让每一个应用程序可完全独立的执行，通过内置的测试和mock设配器，他们获得了敏捷的通过独立的自动化测试脚本去回归测试他们的应用程序。</p>
<hr>
<h1 id="Mac-Windows-Google-Flickr-Web-2-0"><a href="#Mac-Windows-Google-Flickr-Web-2-0" class="headerlink" title="Mac, Windows, Google, Flickr, Web 2.0"></a>Mac, Windows, Google, Flickr, Web 2.0</h1><p>早在1990时，MacIntosh应用程序如文档处理软件就需要有API驱动的接口，所以应用程序和用户编写的脚本就可以访问应用程序的所有的功能。Windows桌面软件有着同样的能力。（我没有对应的历史知识去说谁先出现，反正那也不是重点）  </p>
<p>如今（2005）web软件的趋势是发布一个公共API去让别的软件直接的访问那些APIs。<br>虽然，那可能会通过google map去发布一些犯罪的数据，或者创建web应用程序包括Flickr在内的相片存档和注释的能力。</p>
<p>所有的这些例子都是关于把“主要的”端口的API可视化， 我们看不到任何信息在次要端口。</p>
<h1 id="Stored-Outputs"><a href="#Stored-Outputs" class="headerlink" title="Stored Outputs"></a>Stored Outputs</h1><p>Willem Bogaerts在C2 wiki上写下这个例子：<br>“我遇到过类似的事情，但是主要是因为我的应用程序层有很强的趋势去变成一个电话切换板去管理它不应该去做的事情。我的应用程序产生输出，显示给用户和有可能会去保存好它。我主要的问题是你不需要常常去储存它。所以我的应用程序产生输出，不得不缓存它和展现给用户。然后，当用户决定要保存导出的数据时，应用程序清空缓冲和真正的保存它。  </p>
<p>我一点都不喜欢这个，于是我想出了一个解决方案：有一个带存储功能的展现控制器。现在应用程序不再需要管道输出到不同的方向，只是简单地输出到展现控制器。展现控制器缓冲了结论和给用户去保存它的可能性。  </p>
<p>传统的架构分层强调“UI”和“存储”是不同的。<br>端口和设配器模式架构可以再简化输出到简单的“输出”。<br>”</p>
<h1 id="来自C2-wiki的匿名例子"><a href="#来自C2-wiki的匿名例子" class="headerlink" title="来自C2-wiki的匿名例子"></a>来自C2-wiki的匿名例子</h1><p>“在我做过的一个项目里，我们使用“真音响设备”的系统隐喻。<br>每一个组件定义了接口，每一个接口都有不同的目的。<br>我们几乎可以通过连线和设配器，没有限制的把组件们连接在一起<br>”</p>
<h1 id="分布式，大团队开发"><a href="#分布式，大团队开发" class="headerlink" title="分布式，大团队开发"></a>分布式，大团队开发</h1><p>这个还在实验阶段的使用和还不能恰当地评估这个模式的使用情况。<br>无论如何，那个很有意思去考虑的。  </p>
<p>不同位置的团队们全去构建六边形架构，用着FIT和mocks，所以应用程序和组件可以独立模式下去测试。CruiseControl每半个小时去运行构建和使用FIT+mock的组合去运行所有的应用程序。因为应用程序子系统和数据库已完整地，替换成mock和测试数据库了。</p>
<h1 id="独立的开发UI和应用程序逻辑"><a href="#独立的开发UI和应用程序逻辑" class="headerlink" title="独立的开发UI和应用程序逻辑"></a>独立的开发UI和应用程序逻辑</h1><p>这个还在早期的实验阶段的使用和还不能恰当地评估这个模式的使用情况。<br>无论如何，那个很有意思去考虑的。  </p>
<p>UI设计是不稳定的，因为它们还未定好是那一种驱动的技术或隐喻。<br>后端服务架构没有定好，事实上它可能在半年内经历过几次改变。<br>尽管如此，项目却是正常地启动和时间是滴答作响的。  </p>
<p>应用程序团队创建FIT测试和mocks去隔离他们的应用程序，创建可测试的，可演示的功能展示给他们的用户。<br>当UI和后端服务最终决定时，它“一个直接的”增加那些元素到应用程序里。<br>开始学习怎样实现它。（或你自己尝试下和写邮件给我）</p>
<hr>
<p>（A生注： 相关模式、感谢和其他引用就不再翻译拉～～ ：） ）</p>
<hr>
<h1 id="Related-Patterns"><a href="#Related-Patterns" class="headerlink" title="Related Patterns"></a>Related Patterns</h1><h2 id="Adapter"><a href="#Adapter" class="headerlink" title="Adapter"></a>Adapter</h2><p>The ‘’Design Patterns’’ book contains a description of the generic ‘’Adapter’’ pattern: “Convert the interface of a class into another interace clients expect.” The ports-and-adapters pattern is a particular use of the ‘’Adapter’’ pattern.</p>
<h2 id="Model-View-Controller"><a href="#Model-View-Controller" class="headerlink" title="Model-View-Controller"></a>Model-View-Controller</h2><p>The MVC pattern was implemented as early as 1974 in the Smalltalk project. It has been given, over the years, many variations, such as Model-Interactor and Model-View-Presenter. Each of these implements the idea of ports-and-adapters on the primary ports, not the secondary ports.</p>
<h2 id="Mock-Objects-and-Loopback"><a href="#Mock-Objects-and-Loopback" class="headerlink" title="Mock Objects and Loopback"></a>Mock Objects and Loopback</h2><p>“A mock object is a “double agent” used to test the behaviour of other objects. First, a mock object acts as a faux implementation of an interface or class that mimics the external behaviour of a true implementation. Second, a mock object observes how other objects interact with its methods and compares actual behaviour with preset expectations. When a discrepancy occurs, a mock object can interrupt the test and report the anomaly. If the discrepancy cannot be noted during the test, a verification method called by the tester ensures that all expectations have been met or failures reported.” — From <a href="http://MockObjects.com" target="_blank" rel="noopener">http://MockObjects.com</a></p>
<p>Fully implemented according to the mock-object agenda, mock objects are used throughout an application, not just at the external interface The primary thrust of the mock object movement is conformance to specified protocol at the individual class and object level. I borrow their word “mock” as the best short description of an in-memory substitute for an external secondary actor.</p>
<p>The Loopback pattern is an explicit pattern for creating an internal replacement for an external device.</p>
<h2 id="Pedestals"><a href="#Pedestals" class="headerlink" title="Pedestals"></a>Pedestals</h2><p>In “Patterns for Generating a Layered Architecture”, Barry Rubel describes a pattern about creating an axis of symmetry in control software that is very similar to ports and adapters. The ‘’Pedestal’’ pattern calls for implementing an object representing each hardware device within the system, and linking those objects together in a control layer. The ‘’Pedestal’’ pattern can be used to describe either side of the hexagonal architecture, but does not yet stress the similarity across adapters. Also, being written for a mechanical control environment, it is not so easy to see how to apply the pattern to IT applications.</p>
<h2 id="Checks"><a href="#Checks" class="headerlink" title="Checks"></a>Checks</h2><p>Ward Cunningham’s pattern language for detecting and handling user input errors, is good for error handling across the inner hexagon boundaries.</p>
<h2 id="Dependency-Inversion-Dependency-Injection-and-SPRING"><a href="#Dependency-Inversion-Dependency-Injection-and-SPRING" class="headerlink" title="Dependency Inversion (Dependency Injection) and SPRING"></a>Dependency Inversion (Dependency Injection) and SPRING</h2><p>Bob Martin’s Dependency Inversion Principle (also called Dependency Injection by Martin Fowler) states that “High-level modules should not depend on low-level modules. Both should depend on abstractions. Abstractions should not depend on details. Details should depend on abstractions.” The ‘’Dependency Injection ‘’pattern by Martin Fowler gives some implementations. These show how to create swappable secondary actor adapters. The code can be typed in directly, as done in the sample code in the article, or using configuration files and having the SPRING framework generate the equivalent code.</p>
<hr>
<hr>
<h1 id="Acknowledgements"><a href="#Acknowledgements" class="headerlink" title="Acknowledgements"></a>Acknowledgements</h1><p>Thanks to Gyan Sharma at Intermountain Health Care for providing the sample code used here. Thanks to Rebecca Wirfs-Brock for her book ‘’Object Design’’, which when read together with the ‘’Adapter’’ pattern from the ‘’Design Patterns’’ book, helped me to understand what the hexagon was about. Thanks also to the people on Ward’s wiki, who provided comments about this pattern over the years (e.g., particularly Kevin Rutherford’s <a href="http://silkandspinach.net/blog/2004/07/hexagonal_soup.html)" target="_blank" rel="noopener">http://silkandspinach.net/blog/2004/07/hexagonal_soup.html)</a>.</p>
<hr>
<h1 id="References-and-Related-Reading"><a href="#References-and-Related-Reading" class="headerlink" title="References and Related Reading"></a>References and Related Reading</h1><p>FIT, A Framework for Integrating Testing: Cunningham, W., online at <a href="http://fit.c2.com" target="_blank" rel="noopener">http://fit.c2.com</a>, and Mugridge, R. and Cunningham, W., ‘’Fit for Developing Software’’, Prentice-Hall PTR, 2005.</p>
<p>The ‘’Adapter’’ pattern: in Gamma, E., Helm, R., Johnson, R., Vlissides, J., ‘’Design Patterns’’, Addison-Wesley, 1995, pp. 139-150.</p>
<p>The ‘’Pedestal’’ pattern: in Rubel, B., “Patterns for Generating a Layered Architecture”, in Coplien, J., Schmidt, D., ‘’PatternLanguages of Program Design’’, Addison-Wesley, 1995, pp. 119-150.</p>
<p>The ‘’Checks’’ pattern: by Cunningham, W., online at <a href="http://c2.com/ppr/checks.html" target="_blank" rel="noopener">http://c2.com/ppr/checks.html</a></p>
<p>The ‘’Dependency Inversion Principle’‘: Martin, R., in ‘’Agile Software Development Principles Patterns and Practices’’, Prentice Hall, 2003, Chapter 11: “The Dependency-Inversion Principle”, and online at <a href="http://www.objectmentor.com/resources/articles/dip.pdf" target="_blank" rel="noopener">http://www.objectmentor.com/resources/articles/dip.pdf</a></p>
<p>The ‘’Dependency Injection’’ pattern: Fowler, M., online at <a href="http://www.martinfowler.com/articles/injection.html" target="_blank" rel="noopener">http://www.martinfowler.com/articles/injection.html</a></p>
<p>The ‘’Mock Object’’ pattern: Freeman, S. online at <a href="http://MockObjects.com" target="_blank" rel="noopener">http://MockObjects.com</a></p>
<p>The ‘’Loopback’’ pattern: Cockburn, A., online at <a href="http://c2.com/cgi/wiki?LoopBack" target="_blank" rel="noopener">http://c2.com/cgi/wiki?LoopBack</a></p>
<p>‘’Use cases:’’ Cockburn, A., ‘’Writing Effective Use Cases’’, Addison-Wesley, 2001, and Cockburn, A., “Structuring Use Cases with Goals”, online at <a href="http://alistair.cockburn.us/crystal/articles/sucwg/structuringucswithgoals.htm" target="_blank" rel="noopener">http://alistair.cockburn.us/crystal/articles/sucwg/structuringucswithgoals.htm</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/03/30/Art-2014-2014-11-20-HexArchitecture/" data-id="cjf9gd8a1002dvzzn7z9r9c0v" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/03/30/Art-2014-2014-08-18-IDDD-13/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Neuer</strong>
      <div class="article-nav-title">
        
          IDDD 13 Integrate Bounded Context
        
      </div>
    </a>
  
  
    <a href="/2015/03/30/Art-2014-2014-07-31-IDDD-8/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Älter</strong>
      <div class="article-nav-title">IDDD 8 DomainEvent</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Kategorien</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Art/">Art</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Other/">Other</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tao/">Tao</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tech/">Tech</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Buddha/">Buddha</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DDD/">DDD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDDD/">IDDD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Philosophy/">Philosophy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TroubleShoot/">TroubleShoot</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Buddha/" style="font-size: 10px;">Buddha</a> <a href="/tags/DDD/" style="font-size: 20px;">DDD</a> <a href="/tags/IDDD/" style="font-size: 15px;">IDDD</a> <a href="/tags/Philosophy/" style="font-size: 10px;">Philosophy</a> <a href="/tags/TroubleShoot/" style="font-size: 10px;">TroubleShoot</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/03/27/Tech-2014-2014-09-02-BenefitOfExtractMethod/">Benefit of Extract Method</a>
          </li>
        
          <li>
            <a href="/2018/02/28/Tech-2018-2018-02-27-One-Issue-Cause-By-Id/">One Issue Cause By Id</a>
          </li>
        
          <li>
            <a href="/2016/10/20/Tech-2016-2016-11-09-resinWithJavaEE8/">Resin 3 With JavaEE8</a>
          </li>
        
          <li>
            <a href="/2016/09/13/Tech-2016-2016-09-13-JavaConcurrency/">Java Concurrency</a>
          </li>
        
          <li>
            <a href="/2016/09/12/Tech-2016-2016-09-12-JavaMemModel/">Java Memory Model</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Antinomy Yang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>